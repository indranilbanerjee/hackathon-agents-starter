"use strict";(()=>{var e={};e.id=97,e.ids=[97],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7561:e=>{e.exports=require("node:fs")},9752:(e,o,a)=>{a.r(o),a.d(o,{originalPathname:()=>m,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>v,staticGenerationAsyncStorage:()=>p});var n={};a.r(n),a.d(n,{GET:()=>u});var t=a(9303),s=a(8716),i=a(670),r=a(7070),c=a(5925);async function u(){let e=await (0,c.IJ)("invoice-anomalies","invoices.csv",c.N2.invoices(20));if(!e.success)return r.NextResponse.json({error:e.error||"Failed to load invoice data",source:e.source},{status:500});try{let o=e.data,a=Object.keys(o[0]||{}).find(e=>e.toLowerCase().includes("amount"));if(!a)return r.NextResponse.json({error:"Amount column not found in invoice data",source:e.source,availableFields:Object.keys(o[0]||{})},{status:400});let n=o.map(e=>({id:e.invoice_id||e.id||"Unknown",amount:parseFloat(e[a])||0,vendor:e.vendor||"Unknown",status:e.status||"Unknown",date:e.date||"Unknown"})).filter(e=>!isNaN(e.amount)&&e.amount>0).sort((e,o)=>o.amount-e.amount).slice(0,5);return r.NextResponse.json({top5:n,source:e.source,totalInvoices:o.length,message:"mock-data"===e.source?"Using mock data - no invoice file found":"Invoice data processed successfully",agent:{id:"invoice-anomalies",name:"Invoice Fraud Anomaly Detector",description:"Analyzes invoices for fraud detection and anomaly identification"},dataAccess:{allData:"/api/agents/invoice-anomalies/data",rawInvoices:"/api/agents/invoice-anomalies/data?file=invoices.csv"}})}catch(o){return r.NextResponse.json({error:"Failed to process invoice data",details:o instanceof Error?o.message:"Unknown error",source:e.source},{status:500})}}let d=new t.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/invoice-anomalies/route",pathname:"/api/invoice-anomalies",filename:"route",bundlePath:"app/api/invoice-anomalies/route"},resolvedPagePath:"C:\\Users\\indra\\Downloads\\agents-starter-repo\\agents-starter-repo\\app\\api\\invoice-anomalies\\route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:v}=d,m="/api/invoice-anomalies/route";function f(){return(0,i.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:p})}}};var o=require("../../../webpack-runtime.js");o.C(e);var a=e=>o(o.s=e),n=o.X(0,[789,925],()=>a(9752));module.exports=n})();