"use strict";(()=>{var e={};e.id=97,e.ids=[97],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7561:e=>{e.exports=require("node:fs")},9752:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p});var a={};r.r(a),r.d(a,{GET:()=>l});var o=r(9303),n=r(8716),i=r(670),s=r(7070),c=r(5925);async function l(){let e=await (0,c.IJ)("invoice-anomalies","invoices.csv",c.N2.invoices(20));if(!e.success)return s.NextResponse.json({error:e.error||"Failed to load invoice data",source:e.source},{status:500});try{let t=e.data,r=Object.keys(t[0]||{}).find(e=>e.toLowerCase().includes("amount"));if(!r)return s.NextResponse.json({error:"Amount column not found in invoice data",source:e.source,availableFields:Object.keys(t[0]||{})},{status:400});let a=t.map(e=>({id:e.invoice_id||e.id||"Unknown",amount:parseFloat(e[r])||0,vendor:e.vendor||"Unknown",status:e.status||"Unknown",date:e.date||"Unknown"})).filter(e=>!isNaN(e.amount)&&e.amount>0).sort((e,t)=>t.amount-e.amount).slice(0,5);return s.NextResponse.json({top5:a,source:e.source,totalInvoices:t.length,message:"mock-data"===e.source?"Using mock data - no invoice file found":"Invoice data processed successfully",agent:{id:"invoice-anomalies",name:"Invoice Fraud Anomaly Detector",description:"Analyzes invoices for fraud detection and anomaly identification"},dataAccess:{allData:"/api/agents/invoice-anomalies/data",rawInvoices:"/api/agents/invoice-anomalies/data?file=invoices.csv"}})}catch(t){return s.NextResponse.json({error:"Failed to process invoice data",details:t instanceof Error?t.message:"Unknown error",source:e.source},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/invoice-anomalies/route",pathname:"/api/invoice-anomalies",filename:"route",bundlePath:"app/api/invoice-anomalies/route"},resolvedPagePath:"C:\\Users\\indra\\Downloads\\agents-starter-repo\\agents-starter-repo\\app\\api\\invoice-anomalies\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:m}=u,h="/api/invoice-anomalies/route";function v(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}},5925:(e,t,r)=>{r.d(t,{IJ:()=>s,N2:()=>d,S$:()=>u,Vq:()=>l,eA:()=>c,jo:()=>p});var a=r(7561),o=r(8391),n=r(9363);async function i(e,t,r,i){let s=(0,o.hx)(e);if(!s)return{data:i,source:"error",success:!1,error:`Agent '${e}' not found in registry`};for(let n of(0,o.oZ)(e,t))try{if((0,a.existsSync)(n)){let e=(0,a.readFileSync)(n,"utf8");return{data:r?r(e):e,source:n,success:!0}}}catch(e){continue}let c=(0,n.k9)(s.dayFolder,t);try{let e=await (0,n.np)(s.dayFolder,t,r,i);if(e.success)return{data:e.data,source:`github-${e.source}`,success:!0,githubUrls:c}}catch(e){}return i?{data:i,source:"mock-data",success:!0,githubUrls:c}:{data:null,source:"not-found",success:!1,error:`No data file found for ${e}/${t} in local paths or GitHub`,githubUrls:c}}async function s(e,t,r){return i(e,t,e=>{let[t,...r]=e.trim().split(/\r?\n/),a=t.split(",");return r.map(e=>{let t=e.split(","),r={};return a.forEach((e,a)=>{r[e.trim()]=t[a]?.trim()||""}),r})},r)}async function c(e,t,r){return i(e,t,e=>JSON.parse(e),r)}async function l(e,t,r){return i(e,t,void 0,r)}async function u(e,t,r){return i(e,t,void 0,r)}let d={invoices:(e=10)=>{let t=["TechCorp","DataSys","CloudServ","DevTools","Enterprise","MegaCorp","StartupInc"],r=["paid","pending","overdue"];return Array.from({length:e},(e,a)=>({invoice_id:`INV-${String(a+1).padStart(3,"0")}`,vendor:t[a%t.length],amount:Math.floor(5e4*Math.random())+1e3,date:new Date(Date.now()-7776e6*Math.random()).toISOString().split("T")[0],status:r[a%r.length],iban:"GB33BUKB20201555555555",created_at_utc:new Date().toISOString()}))},meetingTranscript:()=>`Meeting Transcript - Project Planning Session

John: We need to finalize the budget by Friday. @Sarah can you prepare the financial report?
Sarah: Sure, I'll have it ready by Thursday. @Mike, can you review the technical requirements?
Mike: I'll review them by Wednesday and send feedback. @John, we should schedule a follow-up meeting.
John: Good idea. Let's meet again next Monday to discuss the final details.
Alice: @Tom, please update the project timeline based on today's discussion.
Tom: Will do. I'll have the updated timeline ready by tomorrow.`,supportTickets:(e=5)=>{let t=["Billing Issue - Incorrect Charges","Login Problems","Feature Request - Dashboard","Bug Report - Data Export","Account Access Issues"],r=["low","medium","high","critical"],a=["open","in_progress","resolved","closed"];return Array.from({length:e},(e,o)=>({id:`TICKET-${String(o+1).padStart(3,"0")}`,subject:t[o%t.length],description:`Customer reports issue with ${t[o%t.length].toLowerCase()}`,priority:r[o%r.length],status:a[o%a.length],created_at:new Date(Date.now()-2592e6*Math.random()).toISOString(),customer_id:`CUST-${String(o+1).padStart(3,"0")}`}))},sitemap:()=>`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>https://example.com/</loc>
    <lastmod>2024-01-01</lastmod>
    <priority>1.0</priority>
  </url>
  <url>
    <loc>https://example.com/about</loc>
    <lastmod>2024-01-02</lastmod>
    <priority>0.8</priority>
  </url>
  <url>
    <loc>https://example.com/products</loc>
    <lastmod>2024-01-03</lastmod>
    <priority>0.9</priority>
  </url>
  <url>
    <loc>https://example.com/contact</loc>
    <lastmod>2024-01-04</lastmod>
    <priority>0.7</priority>
  </url>
  <url>
    <loc>https://example.com/blog</loc>
    <lastmod>2024-01-05</lastmod>
    <priority>0.6</priority>
  </url>
</urlset>`,vendors:(e=5)=>{let t=["TechCorp Ltd","DataSys Inc","CloudServ Solutions","DevTools Pro","Enterprise Systems"];return Array.from({length:e},(e,r)=>({vendor_id:`VEN-${String(r+1).padStart(3,"0")}`,name:t[r%t.length],email:`contact@${t[r%t.length].toLowerCase().replace(/\s+/g,"")}.com`,tax_id:`TAX${String(r+1).padStart(6,"0")}`,bank_account:`GB33BUKB20201${String(r+1).padStart(9,"0")}`,created_at:new Date(Date.now()-31536e6*Math.random()).toISOString(),status:"active"}))},actionItems:()=>[{owner:"Sarah",title:"Prepare financial report",due:"2025-10-20",priority:"high"},{owner:"Mike",title:"Review technical requirements",due:"2025-10-18",priority:"medium"},{owner:"Tom",title:"Update project timeline",due:"2025-10-17",priority:"medium"}]};async function p(e){let t=(0,o.hx)(e);if(!t)throw Error(`Agent '${e}' not found`);let r={};for(let a of t.dataFiles){let t=a.split(".").pop()?.toLowerCase();try{let o;switch(t){case"csv":o=a.includes("invoice")?await s(e,a,d.invoices()):a.includes("vendor")?await s(e,a,d.vendors()):await s(e,a,[]);break;case"json":o=a.includes("ticket")?await c(e,a,d.supportTickets()):a.includes("action")?await c(e,a,d.actionItems()):await c(e,a,{});break;case"txt":o=a.includes("transcript")?await l(e,a,d.meetingTranscript()):await l(e,a,"Sample text data");break;case"xml":o=a.includes("sitemap")?await u(e,a,d.sitemap()):await u(e,a,'<?xml version="1.0"?><root></root>');break;default:o=await l(e,a,"Unknown file type")}r[a]={data:o.data,source:o.source,success:o.success}}catch(e){r[a]={data:null,source:"error",success:!1,error:e instanceof Error?e.message:"Unknown error"}}}return r}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[789,243],()=>r(9752));module.exports=a})();